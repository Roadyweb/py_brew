{% extends "layout.html" %}

{% block head %}
    {{ super() }}
    <meta http-equiv="refresh" content="5" >
{% endblock %}

{% block body %}
    {% if data %}
        <h2>Recipe Name: {{ data.name }}</h2>
        <br />
        Created: {{ data.created }}<br />
        Last Saved: {{ data.last_saved }}<br />
        <h3>Settings:</h3>
        <table>
        {% for entry in data.list %}
            <tr>
            <td>Temp: {{ entry[0]|safe }} 째C</td>
            <td>Dura: {{ entry[1]|safe }} s</td>
            </tr>
        {% else %}
            <em>No entries</em>
        {% endfor %}
        </table>
    {% endif %}

    {% if state %}
        <h3>State:</h3>
        <table>
        <tr><td align="right">Temp1: </td><td>{{'%0.1f' % state.temp1 }} 째C</td></tr>
        <tr><td align="right">Temp2: </td><td>{{'%0.1f' % state.temp2 }} 째C</td></tr>
        <tr><td align="right">Temp3: </td><td>{{'%0.1f' % state.temp3 }} 째C</td></tr>
        <tr><td align="right">Relais1: </td><td>{{ state.relais1 }}</td></tr>
        <tr><td align="right">Relais2: </td><td>{{ state.relais2 }}</td></tr>
        <tr><td align="right">Relais3: </td><td>{{ state.relais3 }}</td></tr>
        <tr><td></td></tr>
        <tr><td align="right">Cook State: </td><td>{{ state.cook_state }}</td></tr>
        <tr><td align="right">Thread State: </td><td>{{ state.pct_state }}</td></tr>
        <tr><td align="right">Simulation: </td><td>{{ state.simulation }}</td></tr>
        </table>
    {% else %}
        <p>No current data available</p>
    {% endif %}
    <br />
    <form action="." method="POST">
        <input type="submit" name="submit" value="Start">
        <input type="submit" name="submit" value="Stop">
    </form>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul class=flashes>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
        </ul>
        {% endif %}
    {% endwith %}
{% endblock %}
