{% extends "layout.html" %}

{% block head %}
    {{ super() }}
    <meta http-equiv="refresh" content="5" >
{% endblock %}

{% block body %}
    {% if data %}
        <h2>Recipe Name: {{ data.name }}</h2>
        <br />
        Created: {{ data.created }}<br />
        Last Saved: {{ data.last_saved }}<br />
        <h3>Settings:</h3>
        <table>
        <tr>
        <td>Temp K1: {{ data.tempk1 }} °C</td>
        <td>Dura K1: {{ data.durak1 }} s</td>
        </tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        {% if data.method == 'K2' %}
            <tr></tr>
            <tr></tr>
            <tr></tr>
            <tr></tr>
            {% for entry in data.list %}
                <tr>
                <td>Temp K2: {{ entry[0]|safe }} °C</td>
                <td>Dura K2: {{ entry[1]|safe }} s</td>
                </tr>
            {% else %}
                <em>No entries</em>
            {% endfor %}
        {% endif %}
        </table>
        <br />
        Method: {{ data.method }}
    {% endif %}

    {% if state %}
        <h3>State:</h3>
        <table>
        <tr><td align="right">Temp K1: </td><td>{{'%0.1f' % state.tempk1 }} °C</td></tr>
        <tr><td align="right">Temp K2: </td><td>{{'%0.1f' % state.tempk2 }} °C</td></tr>
        <tr><td align="right">Set Temp K1: </td><td>{{'%0.1f' % state.settempk1 }} °C</td></tr>
        <tr><td align="right">Set Temp K2: </td><td>{{'%0.1f' % state.settempk2 }} °C</td></tr>
        <tr><td align="right">Set Dura K1: </td><td>{{'%0.1f' % state.setdurak1 }} s</td></tr>
        <tr><td align="right">Set Dura K2: </td><td>{{'%0.1f' % state.setdurak2 }} s</td></tr>
        <tr><td align="right">Pump 1: </td><td>{{ state.pump1 }}</td></tr>
        <tr><td align="right">Pump 2: </td><td>{{ state.pump2 }}</td></tr>
        <tr><td align="right">Heater: </td><td>{{ state.heater }}</td></tr>
        <tr><td></td></tr>
        <tr><td align="right">Cook State: </td><td>{{ state.cook_state }}</td></tr>
        <tr><td align="right">ProcControl State: </td><td>{{ state.pct_state }}</td></tr>
        <tr><td align="right">TempMon State: </td><td>{{ state.tmt_state }}</td></tr>
        <tr><td align="right">WorkQueue State: </td><td>{{ state.wqt_state }}</td></tr>
        <tr><td align="right">DataLogger State: </td><td>{{ state.dlt_state }}</td></tr>
        <tr><td align="right">Simulation: </td><td>{{ state.simulation }}</td></tr>
        </table>
    {% else %}
        <p>No current data available</p>
    {% endif %}
    <br />
    <form action="." method="POST">
        <input type="submit" name="submit" value="Start">
        <input type="submit" name="submit" value="Stop">
    </form>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul class=flashes>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
        </ul>
        {% endif %}
    {% endwith %}
{% endblock %}
