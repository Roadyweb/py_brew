{% extends "layout.html" %}

{% block head %}
    {{ super() }}
    <meta http-equiv="refresh" content="5" >
{% endblock %}

{% block body %}
    {% if data %}
        <h2>Recipe Name: {{ data.name }}</h2>
        <br />
        Created: {{ data.created }}<br />
        Last Saved: {{ data.last_saved }}<br />
        <h3>Settings:</h3>
        <table>
        {% for entry in data.list %}
            <tr>
            <td>Temp: {{ entry[0]|safe }} Â°C</td>
            <td>Dura: {{ entry[1]|safe }} s</td>
            </tr>
        {% else %}
            <em>No entries</em>
        {% endfor %}
        </table>
    {% endif %}

    {% if state %}
        <h3>State:</h3>
        <table>
        <tr><td>Temp1: {{ state.temp1 }}</td></tr>
        <tr><td>Temp2: {{ state.temp2 }}</td></tr>
        <tr><td>Temp3: {{ state.temp3 }}</td></tr>
        <tr><td>Relais1: {{ state.relais1 }}</td></tr>
        <tr><td>Relais2: {{ state.relais2 }}</td></tr>
        <tr><td>Relais3: {{ state.relais3 }}</td></tr>
        <tr><td>Thread State: {{ state.thread }}</td></tr>
        <tr><td>Cook State: {{ state.cook_state }}</td></tr>
        </table>
    {% else %}
        <p>No current data available</p>
    {% endif %}
    <br />
    <form action="." method="POST">
        <input type="submit" name="submit" value="Start">
        <input type="submit" name="submit" value="Monitor">
        <input type="submit" name="submit" value="Cook">
        <input type="submit" name="submit" value="Exit">
    </form>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul class=flashes>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
        </ul>
        {% endif %}
    {% endwith %}
{% endblock %}
